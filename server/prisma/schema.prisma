generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id        String  @id @default(uuid())
  nisn      String  @unique
  email     String  @unique
  fullName  String
  otp       String?
  isVoted   Boolean @default(false)
  createdAt DateTime @default(now())

  votedCasisId String?  
  votedCasis   Casis?  @relation(fields: [votedCasisId], references: [id])

  ledCasis     Casis[] @relation("LeaderRelation")
  coLedCasis   Casis[] @relation("CoLeaderRelation")
}

model Casis {
  id            String   @id @default(uuid())
  teamName      String
  leaderId      String?  @unique
  leader        Student? @relation("LeaderRelation", fields: [leaderId], references: [id])
  leaderPhoto   String?
  coLeaderId    String?  @unique
  coLeader      Student? @relation("CoLeaderRelation", fields: [coLeaderId], references: [id])
  coLeaderPhoto String?
  proker        String?
  createdAt     DateTime @default(now())

  votedBy       Student[]
}